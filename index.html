<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–ª–æ–∂–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      transition: background-color 0.3s, color 0.3s;
    }

    .dark-mode {
      background-color: #121212;
      color: #e0e0e0;
    }

    .dark-mode .form-control,
    .dark-mode .table {
      background-color: #1e1e1e;
      color: #ffffff;
      border-color: #444;
    }

    .dark-mode .table-striped tbody tr:nth-of-type(odd) {
      background-color: #222;
    }

    .table td,
    .table th {
      vertical-align: middle;
    }

    .btn-primary {
      background-color: #2c3e50;
      border-color: #2c3e50;
    }

    .btn-primary:hover {
      background-color: #1a252f;
      border-color: #1a252f;
    }

    .form-check.form-switch .form-check-input {
      width: 2.5rem;
      height: 1.3rem;
      margin-left: 0.5rem;
      margin-right: 0.5rem;
    }

    .switch-label {
      font-weight: 500;
      font-size: 14px;
      white-space: nowrap;
      line-height: 1;
    }

    h6 {
      font-weight: 500;
      font-size: 16px;
    }
  </style>
</head>
<body class="py-5">

  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 id="title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–ª–æ–∂–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞</h2>
      <div class="d-flex gap-3 align-items-center">
        <!-- –Ø–∑—ã–∫ -->
        <div class="form-check form-switch d-flex align-items-center">
          <span class="switch-label">RU</span>
          <input class="form-check-input" type="checkbox" id="langToggle" onchange="toggleLanguage()" />
          <span class="switch-label">EN</span>
        </div>
        <!-- –¢–µ–º–∞ -->
        <div class="form-check form-switch d-flex align-items-center">
          <span class="switch-label">‚òÄÔ∏è</span>
          <input class="form-check-input" type="checkbox" id="themeToggle" onchange="toggleTheme()" />
          <span class="switch-label">üåô</span>
        </div>
      </div>
    </div>

    <div class="row g-3 mb-4">
      <div class="col-md-6 col-lg-3">
        <label class="form-label" id="label-initial">–ù–∞—á–∞–ª—å–Ω–∞—è —Å—É–º–º–∞</label>
        <input type="number" class="form-control" id="initial" value="1000" />
      </div>
      <div class="col-md-6 col-lg-3">
        <label class="form-label" id="label-rate">–ü—Ä–æ—Ü–µ–Ω—Ç –≤ –Ω–µ–¥–µ–ª—é (%)</label>
        <input type="number" class="form-control" id="rate" value="2" />
      </div>
      <div class="col-md-6 col-lg-3">
        <label class="form-label" id="label-weeks">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–¥–µ–ª—å</label>
        <input type="number" class="form-control" id="weeks" value="52" />
      </div>
      <div class="col-md-6 col-lg-3">
        <label class="form-label" id="label-deposit">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</label>
        <input type="number" class="form-control" id="deposit" value="100" />
      </div>
      <div class="col-12 text-center mt-3">
        <button class="btn btn-primary px-5" id="calcBtn" onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
      </div>
    </div>

    <div class="row g-3 mb-4 text-center">
      <div class="col-md-4">
        <h6 id="userInvestment">–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏: 0.00</h6>
      </div>
      <div class="col-md-4">
        <h6 id="finalAmount">–ò—Ç–æ–≥–æ –Ω–∞ –∫–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞: 0.00</h6>
      </div>
      <div class="col-md-4">
        <h6 id="futureEarnings">–î–æ—Ö–æ–¥ –∑–∞ –Ω–µ–¥–µ–ª—é –≤ –∫–æ–Ω—Ü–µ –ø–µ—Ä–∏–æ–¥–∞: 0.00</h6>
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-bordered table-striped table-hover text-center align-middle" id="resultTable">
        <thead class="table-dark" id="tableHeader">
          <tr>
            <th>–ù–µ–¥–µ–ª—è</th>
            <th>–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å</th>
            <th>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</th>
            <th>–ü—Ä–æ—Ü–µ–Ω—Ç—ã</th>
            <th>–ö–æ–Ω–µ—á–Ω—ã–π –±–∞–ª–∞–Ω—Å</th>
            <th>–ò—Ç–æ–≥–æ –ø—Ä–∏–±—ã–ª—å</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <script>
    let currentLang = 'ru';

    const texts = {
      ru: {
        title: "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–ª–æ–∂–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞",
        labelInitial: "–ù–∞—á–∞–ª—å–Ω–∞—è —Å—É–º–º–∞",
        labelRate: "–ü—Ä–æ—Ü–µ–Ω—Ç –≤ –Ω–µ–¥–µ–ª—é (%)",
        labelWeeks: "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–¥–µ–ª—å",
        labelDeposit: "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ",
        button: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å",
        finalAmount: "–ò—Ç–æ–≥–æ –Ω–∞ –∫–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞: ",
        userInvestment: "–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏: ",
        tableHeaders: ["–ù–µ–¥–µ–ª—è", "–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å", "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ", "–ü—Ä–æ—Ü–µ–Ω—Ç—ã", "–ö–æ–Ω–µ—á–Ω—ã–π –±–∞–ª–∞–Ω—Å", "–ò—Ç–æ–≥–æ –ø—Ä–∏–±—ã–ª—å"]
      },
      en: {
        title: "Compound Interest Calculator",
        labelInitial: "Initial Amount",
        labelRate: "Weekly Interest Rate (%)",
        labelWeeks: "Number of Weeks",
        labelDeposit: "Weekly Deposit",
        button: "Calculate",
        finalAmount: "Total at the end: ",
        userInvestment: "Your investment: ",
        tableHeaders: ["Week", "Start Balance", "Deposit", "Interest", "End Balance", "Total Profit"]
      }
    };

    function updateLanguage(lang) {
      const t = texts[lang];
      document.getElementById('title').innerText = t.title;
      document.getElementById('label-initial').innerText = t.labelInitial;
      document.getElementById('label-rate').innerText = t.labelRate;
      document.getElementById('label-weeks').innerText = t.labelWeeks;
      document.getElementById('label-deposit').innerText = t.labelDeposit;
      document.getElementById('calcBtn').innerText = t.button;

      const headers = document.querySelector("#tableHeader tr").children;
      t.tableHeaders.forEach((val, i) => {
        headers[i].innerText = val;
      });

      calculate();
    }

    function toggleLanguage() {
      currentLang = document.getElementById('langToggle').checked ? 'en' : 'ru';
      updateLanguage(currentLang);
    }

    function toggleTheme() {
      document.body.classList.toggle("dark-mode");
    }

    function sanitizeInput(id) {
      const input = document.getElementById(id);
      let value = parseFloat(input.value);
      if (isNaN(value)) {
        input.value = '0';
        value = 0;
      }
      return value;
    }

    function calculate() {
      const t = texts[currentLang];
      const initial = sanitizeInput('initial');
      const ratePercent = sanitizeInput('rate');
      const weeks = Math.floor(sanitizeInput('weeks'));
      const deposit = sanitizeInput('deposit');
      const rate = ratePercent / 100;

      let balance = initial;
      let totalProfit = 0;
      const tableBody = document.querySelector("#resultTable tbody");
      tableBody.innerHTML = '';

      if (weeks <= 0) {
        document.getElementById("userInvestment").innerText = `${t.userInvestment}0.00`;
        document.getElementById("finalAmount").innerText = `${t.finalAmount}0.00`;
        document.getElementById("futureEarnings").innerText = `–î–æ—Ö–æ–¥ –∑–∞ –Ω–µ–¥–µ–ª—é –≤ –∫–æ–Ω—Ü–µ –ø–µ—Ä–∏–æ–¥–∞: 0.00`;
        return;
      }

      for (let week = 1; week <= weeks; week++) {
        const interest = balance * rate;
        const newBalance = balance + interest + deposit;
        totalProfit += interest;

        tableBody.innerHTML += `
          <tr>
            <td>${week}</td>
            <td>${balance.toFixed(2)}</td>
            <td>${deposit.toFixed(2)}</td>
            <td>${interest.toFixed(2)}</td>
            <td>${newBalance.toFixed(2)}</td>
            <td>${totalProfit.toFixed(2)}</td>
          </tr>
        `;
        balance = newBalance;
      }

      const totalInvested = initial + deposit * weeks;

      document.getElementById("userInvestment").innerText = `${t.userInvestment}${totalInvested.toFixed(2)}`;
      document.getElementById("finalAmount").innerText = `${t.finalAmount}${balance.toFixed(2)}`;
      document.getElementById("futureEarnings").innerText = `–î–æ—Ö–æ–¥ –∑–∞ –Ω–µ–¥–µ–ª—é –≤ –∫–æ–Ω—Ü–µ –ø–µ—Ä–∏–æ–¥–∞: ${(balance * rate).toFixed(2)}`;
    }

    window.onload = () => {
      updateLanguage('ru');
    };
  </script>
</body>
</html>
