<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–ª–æ–∂–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light py-5">

<div class="container">
  <h2 class="text-center mb-4">üìà –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–ª–æ–∂–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞</h2>

  <div class="row g-3 mb-4">
    <div class="col-md-6 col-lg-3">
      <label class="form-label">–ù–∞—á–∞–ª—å–Ω–∞—è —Å—É–º–º–∞</label>
      <input type="number" class="form-control" id="initial" value="1000">
    </div>
    <div class="col-md-6 col-lg-3">
      <label class="form-label">–ü—Ä–æ—Ü–µ–Ω—Ç –≤ –Ω–µ–¥–µ–ª—é (%)</label>
      <input type="number" class="form-control" id="rate" value="2">
    </div>
    <div class="col-md-6 col-lg-3">
      <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–¥–µ–ª—å</label>
      <input type="number" class="form-control" id="weeks" value="52">
    </div>
    <div class="col-md-6 col-lg-3">
      <label class="form-label">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</label>
      <input type="number" class="form-control" id="deposit" value="100">
    </div>
    <div class="col-12 text-center mt-3">
      <button class="btn btn-primary px-5" onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
    </div>
  </div>

  <div class="row g-3 mb-4 text-center">
    <div class="col-md-6"><h5 id="finalAmount" class="text-success">–ò—Ç–æ–≥–æ –Ω–∞ –∫–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞: 0.00</h5></div>
    <div class="col-md-6"><h5 id="futureEarnings" class="text-warning">–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º: 0.00 –≤ –Ω–µ–¥–µ–ª—é</h5></div>
  </div>

  <div class="table-responsive">
    <table class="table table-bordered table-striped table-hover text-center align-middle" id="resultTable">
      <thead class="table-dark">
        <tr>
          <th>–ù–µ–¥–µ–ª—è</th>
          <th>–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å</th>
          <th>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</th>
          <th>–ü—Ä–æ—Ü–µ–Ω—Ç—ã</th>
          <th>–ö–æ–Ω–µ—á–Ω—ã–π –±–∞–ª–∞–Ω—Å</th>
          <th>–ò—Ç–æ–≥–æ –ø—Ä–∏–±—ã–ª—å</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script>
function sanitizeInput(id) {
  const input = document.getElementById(id);
  let value = parseFloat(input.value);
  if (isNaN(value) || value < 0) {
    input.value = '0';
    value = 0;
  }
  return value;
}

function calculate() {
  const initial = sanitizeInput('initial');
  const ratePercent = sanitizeInput('rate');
  const weeks = Math.floor(sanitizeInput('weeks'));
  const deposit = sanitizeInput('deposit');
  const rate = ratePercent / 100;

  let balance = initial;
  let totalProfit = 0;
  const tableBody = document.querySelector("#resultTable tbody");
  tableBody.innerHTML = '';

  if (weeks <= 0 || (initial === 0 && deposit === 0)) {
    document.getElementById("finalAmount").textContent = `–ò—Ç–æ–≥–æ –Ω–∞ –∫–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞: 0.00`;
    document.getElementById("futureEarnings").textContent = `–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º: 0.00 –≤ –Ω–µ–¥–µ–ª—é`;
    return;
  }

  for (let week = 1; week <= weeks; week++) {
    const interest = balance * rate;
    const newBalance = balance + interest + deposit;
    totalProfit += interest;

    tableBody.innerHTML += `
      <tr>
        <td>${week}</td>
        <td>${balance.toFixed(2)}</td>
        <td>${deposit.toFixed(2)}</td>
        <td>${interest.toFixed(2)}</td>
        <td>${newBalance.toFixed(2)}</td>
        <td>${totalProfit.toFixed(2)}</td>
      </tr>
    `;

    balance = newBalance;
  }

  document.getElementById("finalAmount").textContent = `–ò—Ç–æ–≥–æ –Ω–∞ –∫–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞: ${balance.toFixed(2)}`;
  const futureProfit = balance * rate;
  document.getElementById("futureEarnings").textContent = `–ó–∞—Ä–∞–±–æ—Ç–æ–∫ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º: ${futureProfit.toFixed(2)} –≤ –Ω–µ–¥–µ–ª—é`;
}

window.onload = calculate;
</script>

</body>
</html>
